<html>
<head>

<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">

<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<style type="text/css">
  .canvas_wrapper {
    float: left;
    margin: 0.5em;
    padding: 0.5em;
    border: 1px solid black;
  }
  
  .canvas_controls {
    margin: 0.5em;
  }
  
  .ui-slider {
    margin-bottom: 0.5em;
  }
</style>

<script src="barnsley.js"></script>
<script src="tree.js"></script>
<script src="mandelbrot.js"></script>

<script type="text/javascript">
function init_canvas(id, bgcolor, fgcolor) {
  var canvas = document.getElementById(id);
  var context = canvas.getContext('2d');
  context.fillStyle = bgcolor;
  context.fillRect(0, 0, $(canvas).width(), $(canvas).height());
  context.fillStyle = fgcolor;
  context.strokeStyle = fgcolor;
  
  return context;
}

function three_branch_tree(branch_angle) {
  var context = init_canvas('tree', '#E8EDE8', '#663300');
  draw_three_branch_tree(context, {
    initial_point: {x: 160, y: 290},
    trunk_length: 260,
    max_depth: 8,
    start_angle: -90,
    branch_angle: branch_angle
  });
}

$(document).ready(function(){
  var context = init_canvas('barnsley', '#E8EDE8', '#009900');
  draw_barnsley_fern(context, {
    scale: 30,
    xoffset: 3,
    yoffset: 10,
  });
 
  three_branch_tree(parseInt($('#angle').text()));
  
  var slider = $('#slider').slider({
    min: 0,
    max: 180,
    value: $('#angle').text(),
    slide: function( event, ui ) {
      $( '#angle' ).text( ui.value );
      three_branch_tree(parseInt($('#angle').text()));
  }});

  var context = init_canvas('mandelbrot', '#E8EDE8', '#000000');
  draw_mandelbrot(context, {color_depth: 16777215, max_iteration: 100});
});
</script>
</head>
<body>
<div class="canvas_wrapper">
<canvas id="barnsley" width="220" height="320"></canvas>
</div>
<div class="canvas_wrapper">
  <canvas id="tree" width="320" height="320"></canvas>
  <div class="canvas_controls">
    <div id="slider" ></div>
    <span> Branch Angle: <span id="angle">30</span>&deg;</span>
  </div>
</div>
<div class="canvas_wrapper">
  <canvas id="mandelbrot" width="320" height="320"></canvas>
</div>
</body>
</html>
